<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="ShowX APKs, MODs, ISOs, Pel√≠culas y m√°s.">
  <title>ShowX APKs</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="icon" href="LOGO.png" type="image/png">
  <link rel="stylesheet" href="style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
</head>

<body>
  <!-- === SECCI√ìN APKS === -->
  <section id="apks">
    <div class="container">
      <h2>ANDROID üì±</h2>
      <p>APKS, MODS, ISOS, PELICULAS, PROGRAMAS, LINKS √öTILES Y M√ÅS.</p>

      <!-- === BARRA DE B√öSQUEDA === -->
      <div class="search-bar">
        <input type="text" id="search-input" placeholder="Buscar..." aria-label="Buscar">
      </div>

      <!-- === FILTROS DE CATEGOR√çA === -->
      <div class="apk-filters">
        <button class="filter-btn active" data-category="all">APK</button>
        <button class="filter-btn" data-category="video">VIDEO</button>
        <button class="filter-btn" data-category="games">GAMES</button>
        <button class="filter-btn" data-category="modding">MOD</button>
      </div>

      <!-- === CUADR√çCULA DE APLICACIONES === -->
      <div class="apk-grid" id="apk-grid"></div>
      <div id="error" style="display: none; color: red;">Error al cargar APKs</div>
    </div>
  </section>

  <!-- === SCRIPT DE CARGA, FILTRO Y B√öSQUEDA === -->
  <script>
    function getCategories(name, description) {
      const lowerName = name.toLowerCase();
      const lowerDesc = description.toLowerCase();
      const categories = [];

      if (lowerName.includes('capcut') || lowerDesc.includes('edici√≥n') || lowerDesc.includes('video')) {
        categories.push('video');
      }
      if (lowerName.includes('simulator') || lowerDesc.includes('juego') || lowerDesc.includes('game')) {
        categories.push('games');
      }
      if (lowerName.includes('mod') || lowerDesc.includes('mod')) {
        categories.push('modding');
      }

      return categories.length > 0 ? categories : ['apk'];
    }

    async function loadApks() {
      try {
        Papa.parse('https://docs.google.com/spreadsheets/d/e/2PACX-1vTUbapksr6zWszFpUjeWR6jPS6QOA6OL7iuO4ew9gASwx5LLzR9o-bKbRXSLQv360GQBoINiSpdzIGf/pub?gid=1055416471&single=true&output=csv', {
          download: true,
          header: true,
          complete: function(results) {
            const apkGrid = document.getElementById('apk-grid');
            apkGrid.innerHTML = '';

            results.data.forEach(row => {
              const name = row.Nombre || 'Sin nombre';
              const description = row.Descripci√≥n || 'Sin descripci√≥n';
              const url = row.URL_Descarga || '#';
              const image = row.URL_Imagen || 'https://img.freepik.com/vector-premium/icono-android-icono-relleno-negro_1076610-103538.jpg?semt=ais_hybrid&w=740&q=80';
              const rating = row.Calificaci√≥n || '3.8';

              const categories = getCategories(name, description);
              const categoryData = categories.join(' ');

              const apkCard = document.createElement('div');
              apkCard.className = 'apk-card';
              apkCard.dataset.category = categoryData;
              apkCard.innerHTML = `
                <img src="${image}" alt="${name}">
                <h3>${name}</h3>
                <p>${description}</p>
                <div class="apk-rating">‚≠ê ${rating}</div>
                <a href="${url}" target="_blank" class="btn">DOWNLOAD</a>
              `;
              apkGrid.appendChild(apkCard);
            });
          },
          error: function(err) {
            console.error('Error parsing CSV:', err);
            document.getElementById('error').style.display = 'block';
          }
        });
      } catch (err) {
        console.error('Error loading APKs:', err);
        document.getElementById('error').style.display = 'block';
      }
    }

    loadApks();

    // Filtrado por categor√≠a
    document.addEventListener('click', e => {
      if (e.target.classList.contains('filter-btn')) {
        document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
        e.target.classList.add('active');
        const category = e.target.dataset.category;

        document.querySelectorAll('.apk-card').forEach(card => {
          const categories = card.dataset.category.split(' ');
          card.style.display = category === 'all' || categories.includes(category) ? 'block' : 'none';
        });
      }
    });

    // B√∫squeda en tiempo real
    document.querySelector('#search-input').addEventListener('input', e => {
      const searchTerm = e.target.value.toLowerCase();
      document.querySelectorAll('.apk-card').forEach(card => {
        const title = card.querySelector('h3').textContent.toLowerCase();
        const description = card.querySelector('p').textContent.toLowerCase();
        card.style.display = title.includes(searchTerm) || description.includes(searchTerm) ? 'block' : 'none';
      });

      if (searchTerm) {
        document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
      }
    });
  </script>
</body>
</html>
